<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JavaScript Loan Calculator</title>
<style>/*这是一个CSS样式表*/
.output{font-weight: bold;}
#payment{text-decoration: underline;}
#graph{border: solid black 1px;}
th,td{vertical-align: top;}
</style>
</head>
<body>
<!-- 这是一个HTML表格，其中包含<input>元素可以用来输入数据。程序将在<span>元素中显示计算结果，这些元素都具有类似“interset”和“years”的id这些id将在表格下面的JavaScript代码中用到。我们注意到，有一些input元素定义了“onchange”或者“onclick”的事件处理程序，以便用户在输入数据或者点击inputs的时候执行指定的JavaScript代码段。 -->
<table>
    <tr>
        <th>Enter Loan Data:</th>
        <td></td>
        <th>Loan Balance,Cumulative Equity,and Interest Payments</th>
    </tr>
    <tr>
        <td>Amount of the loan ($) :</td>
        <td><input onchange="calculate();" id="amount"></td>
        <td rowspan=8>
            <canvas id="graph" width="400" height="250"></canvas>
        </td>
    </tr>
    <tr>
        <td>Annual interest ($) :</td>
        <td><input  id="apr" onchange="calculate();"></td>
    </tr>
    <tr>
        <td>Repayment period (years) :</td>
        <td><input onchange="calculate();" id="years"></td>
    </tr>
    <tr>
        <td>Zipcode (to find lenders)</td>
        <td><input onchange="calculate();" id="zipcode"></td>
    </tr>
    <tr>
        <th>Approximate Payments :</th>
        <td><button onclick="calculate();">Calculate</button></td>
    </tr>
    <tr>
        <td>Monthly payment:</td>
        <td>$<span class="output" id="payment"></span></td>
    </tr>
    <tr>
        <td>Total payment :</td>
        <td>$<span class="output" id="total"></span></td>
    </tr>
    <tr>
        <td>Total interest:</td>
        <td>$<span class="output" id="totalinterest"></span></td>
    </tr>
    <tr>
        <th>Sponsors:</th>
        <td colspan="2">Apply for your loan with one of these fine lenders :
            <div id="lenders"></div>
        </td>
    </tr>
</table>
<!-- 随后是JavaScript代码，这些代码内嵌在一个<script>标签里 -->
<!-- 通常情况下，这些脚本代码应当放在<head>标签中 -->
<!-- 将JavaScript代码放在HTML代码之后仅仅是为了便于理解 -->
<script type="text/javascript">
    "use strict";//如果浏览器支持则开启ECMAscript 5的严格模式
    /*
    * 这里的脚本定义了calculate()，在HTML代码中绑定事件处理程序时会调用它.
    * 这个函数从<input>中读取数据，计算贷款赔付信息，并将结果显示在<span>元素中
    *同样，这里还保存了用户数据，展示了放贷人链接并绘制出了图表
    */
   function calculate() {
    // 查找文档中用于输入输出的元素
    var amount=document.getElementById("amount");
    var apr=document.getElementById("apr");
    var years=document.getElementById("years");
    var zipcode=document.getElementById("zipcode");
    var payment=document.getElementById("payment");
    var total=document.getElementById("payment");
    var totalinterest=document.getElementById("totalinterest");

    // 假设所有的输入都是合法的，将从input元素中获取输入数据
    // 将百分比格式转换成小数格式，并从年利率转换成月利率
    // 将年度赔付转换成月度赔付
    var principal=parseInt(amount.Value);
    var interest=parseInt(apr.Value) / 100 / 12;
    var payments=parseInt(years.Value) * 12;

    // 现在计算月度赔付的数据
    var x=Math.pow(1+interest,payments);//math.pow进行幂次运算
    var monthly=(principal*x*interest)/(x-1);

    // 如果结果没有超过JavaScript能表示的数字范围，且用户的输入也正确，这里所显示的结果就是合法的。
    if (isFinite(monthly)) {}
}
</script>
</body>

</html>